/*! xt.ua 2017-02-13 */
window.onbeforeunload=function(a){},$(window).on("load",function(){$("html, body").trigger("scroll")}),$(function(){GetLocation(),1==$(window.location.hash).length&&"modal"==$(window.location.hash).data("type")&&openObject(window.location.hash.replace("#","")),setTimeout(function(){"agree"!=$.cookie("useCookie")?($(".cookie_msg_js").css("top","calc(100% - "+$(".cookie_msg_js").outerHeight()+"px)"),$("body").on("click",".cookie_msg_js .close",function(a){a.preventDefault(),$(".cookie_msg_js").css("top","100%"),$.cookie("useCookie","agree",{expires:365}),setTimeout(function(){$(".cookie_wrap").remove(),$(".err_msg_as_title").css("opacity","1")},3e3)})):$(".err_msg_as_title").css("opacity","1")},2e3),$(".changeView_js").on("click",function(){var a=$(this).data("view");$(".productsListView i").removeClass("activeView"),$(this).addClass("activeView"),"list"==a?$(".cart_info .price_nav").removeClass("hidden"):$(".cart_info .price_nav").addClass("hidden"),ChangeView(a),resizeAsideScroll("click")}),$(".show_more_js").on("click",function(a){a.preventDefault();var b=$(this).closest(".products_page"),c=current_id_category,d=parseInt(b.find(".paginator li.active").first().text()),e=parseInt(b.find(".paginator li.active").last().text()),f=e+1,g=b.find(".card").get().length,h=30*(d-1),i=$(this).data("cnt");$(".show_more").append('<span class="load_more"></span>');var j={action:"getmoreproducts_desctop",id_category:c,shown_products:g,skipped_products:h};addLoadAnimation(".show_more_js"),ajax("products","getmoreproducts",j,"html").done(function(a){removeLoadAnimation(".show_more_js");var c=($.cookie("product_view"),parseInt(i-30-parseInt(h+g)));b.find(".products").append(a),$("img.lazy").lazyload({effect:"fadeIn"}),b.find(".paginator li.page"+f).length<1?parseInt(i-parseInt(h+g)+30)>30?b.find(".paginator li.next_pages").addClass("active").find("a").attr("href","#"):b.find(".paginator li.last_page").addClass("active").find("a").attr("href","#"):b.find(".paginator li.page"+f).addClass("active").find("a").attr("href","#"),c<0&&$("#show_more_products").hide(),$(".load_more").remove(),resizeAsideScroll("show_more")})}),$("body").on("change",".qty_js",function(){AddNoteArea($(this));var a=$(this).closest(".product_buy").attr("data-idproduct"),b=$(this).val(),c=$(this).closest(".product_section").find(".note textarea").val();SendToAjax(a,b,!1,!1,c)}),$("body").on("click",".buy_btn_js",function(){AddNoteArea($(this));var a=$(this).closest(".product_buy").attr("data-idproduct"),b=$(this).closest(".product_buy").find(".qty_js").val(),c=$(this).closest(".product_section").find(".note textarea").val();SendToAjax(a,b,!1,!1,c)}),$("body").on("click",".btn_qty_js",function(){AddNoteArea($(this))}),$(".note_field").blur(function(){""!==$(".note_field").val()&&$(this).closest(".card").find(".note").removeClass("activeNoteArea");var a=$(this).data("id"),b=$(this).val();ajax("cart","updateCartQty",{id_product:a,note:b})}),$("body").on("click",".remove_favor_js",function(a){a.preventDefault();var b=$(this).closest(".favorite_js").data("idproduct"),c=$(this);$("#confirmDelItem").data("delIdItem",b).data("list","favor"),c.addClass("clicked_js").closest(".tableRow").addClass("flag_js")}),$("body").on("click",".remove_waitinglist_js",function(a){a.preventDefault();var b=$(this).closest(".waiting_list_js").data("idproduct"),c=$(this);$("#confirmDelItem").data("delIdItem",b).data("list","waiting"),c.addClass("clicked_js").closest(".tableRow").addClass("flag_js")}),$("#confirmDelItem").on("click",".deleteBtn_js",function(){var a=$("#confirmDelItem").data("delIdItem"),b=$(".clicked_js");closeObject("confirmDelItem"),"favor"==$("#confirmDelItem").data("list")?(addLoadAnimation(".flag_js"),ajax("product","del_favorite",{id_product:a}).done(function(a){if(a.fav_count>0){b.closest(".favorite_js").remove(),$(".userChoiceFav").text("("+a.fav_count+")");var a={message:"Товар удален из списка избранных товаров"},c=document.querySelector("#snackbar");c.MaterialSnackbar.showSnackbar(a)}else $("#favorites").html("<h5>У Вас нет избранных товаров</h5>"),$(".userChoiceFav").text("(0)")})):"waiting"==$("#confirmDelItem").data("list")&&(addLoadAnimation(".flag_js"),ajax("product","del_from_waitinglist",{id_product:a}).done(function(a){if(a.fav_count>0){b.closest(".waiting_list_js").remove(),$(".userChoiceWait").text("("+a.fav_count+")");var a={message:"Товар удален из листа ожидания"},c=document.querySelector("#snackbar");c.MaterialSnackbar.showSnackbar(a)}else $("#waiting_list").html("<h5>Лист ожидания пуст</h5>"),$(".userChoiceWait").text("(0)")})),b.removeClass("clicked_js"),$(".flag_js").removeClass("flag_js")}),$("#confirmDelItem").on("click",".cancelBtn_js",function(){$("#confirmDelItem").removeData("delIdItem"),$(".clicked_js").removeClass("clicked_js"),$(".flag_js").removeClass("flag_js"),closeObject("confirmDelItem")}),$("#cart").on("click",".this_my_number_js",function(){var a=$("#cart #user_number").val();$("#confirmMyPhone .new_phone").val(a)}),$("#confirmMyPhone").on("click",".send_confirm_sms_js",function(){var a=$("#confirmMyPhone .new_phone").val().replace(/[^\d]+/g,"");$("#confirmMyPhone .new_phone").val(a),addLoadAnimation("#confirmMyPhone"),ajax("auth","recoverPhone",{phone:a}).done(function(){removeLoadAnimation("#confirmMyPhone"),$("#confirmMyPhone .ask_send_code_js").addClass("hidden"),$("#confirmMyPhone .ver_info_js").removeClass("hidden"),Position($('[data-type="modal"].opened')),$("#verification_code").focus()})}),$("#confirmMyPhone").on("click",".confirm_js",function(){var a=$("#verification_code").val(),b=$("#confirmMyPhone .new_phone").val();""===a?$("#verification_code").closest("div").addClass("is-invalid"):(addLoadAnimation("#confirmMyPhone"),ajax("auth","checkСodePhone",{phone:b,code:a}).done(function(){removeLoadAnimation("#confirmMyPhone"),$("#confirmMyPhone .ver_info_js").addClass("hidden"),$("#confirmMyPhone .ver_info_success_js").removeClass("hidden"),Position($('[data-type="modal"].opened'))}))}),$("#confirmMyPhone .continue_make_order_js").on("click",function(){closeObject("confirmMyPhone"),openObject("cart"),GetCartAjax()});$("#seoTextBlock").text();0===$('ul.second_nav.allSections > li.active > ul[data-lvl="2"] > li.active:has(ul)').length||$('ul.second_nav.allSections ul[data-lvl="3"] > li').hasClass("active")?$('.main_nav li[data-nav="filter"]').removeClass("hidden"):$('.main_nav li[data-nav="filter"]').addClass("hidden"),0===$("ul.second_nav.allSections li.active").find("li.active").length&&$('.main_nav li[data-nav="filter"]').addClass("hidden"),$("#segmentNavOrg, #segmentNavStore, #allCategotyCont").find("li.active")&&0===$("ul.second_nav li.active").find("li.active").length&&$('.main_nav li[data-nav="filter"]').addClass("hidden"),$(".main_nav > li").click(function(){$(".main_nav > li").hasClass("active")&&!$("ul.second_nav li").hasClass("active")&&$('.main_nav li[data-nav="filter"]').addClass("hidden")}),$('.second_nav > li[onclick^="segmentOpen"]').click(function(){$('.main_nav li[data-nav="filter"]').addClass("hidden")}),$("body").on("click",'a[href="#"]',function(a){a.preventDefault()});var a=$(window).width(),b=$(window).height(),c=($("section .center").height(),$("header").outerHeight());$("img.lazy").lazyload({effect:"fadeIn"}),$(".prod_structure span.list").on("click",function(){ChangeView("list")}),$(".prod_structure span.module").on("click",function(){ChangeView("module")});var d=.9;a>712&&(d=.8),$("#cart .order_wrapp").css("max-height",(b-c)*d),$(".mob_s_btn").on("click",function(){$("#search").focus()}),$("#search").on("keyup",function(){""!==$(this).val()?$(".search_btn").hasClass("is-disabled")||$(".search_btn").addClass("is-disabled"):$(".search_btn").hasClass("is-disabled")&&$(".search_btn").removeClass("is-disabled")}),$("#category-lower-right").on("click",function(a){a.preventDefault()}),$(".imit_select").on("click",".mdl-menu__item",function(){var a=$(this).text();$(this).data("value");$(this).closest(".imit_select").find(".mdl-menu__item").removeClass("active"),$(this).closest(".imit_select").find(".select_field").text(a),$(this).closest(".mdl-menu__container").removeClass("is-visible"),$(this).addClass("active")}),$(".region.imit_select").on("click",".mdl-menu__item",function(){GetCities($(".region.imit_select").find(".select_field").text()),$(".city.imit_select").find(".select_field").text("Выбрать")}),$(".sort.imit_select .mdl-menu__item").on("click",function(){var a=JSON.parse($.cookie("sorting"));if(void 0!==a.current_controller){a.current_controller.value=$(this).data("value");var b=JSON.stringify(a);$.cookie("sorting",b,{expires:2,path:"/"}),location.reload()}}),$(".menu").on("click",function(){var a=$(this).text();$("header").outerHeight();"menu"==a?$(this).html("close"):$(this).html("menu")}),$(".search_close").on("click",function(){closeObject()});var e=$("header"),f=!!$("body").hasClass("advantages_hide"),g=$(".advantages").outerHeight(),h=($(window).height(),$(window).width());$(".main").outerHeight(),$(".main_nav").outerHeight(!0);$(".breadcrumbs .btn_js").on("click",function(){IsMobile===!0&&h>=728&&$("body").hasClass("no-sidebar")===!1&&$(this).removeClass("btn_js")}),$(".logo").on("click",function(a){$("body").hasClass("c_main")&&f===!0&&(a.preventDefault(),$(".advantages").animate({height:g},300),$("html, body").animate({scrollTop:0},300),$("body").removeClass("advantages_hide"),e.removeClass("fixed_panel").addClass("default"),setTimeout(function(){f=!1},305),IsMobile===!0&&$("aside").css({position:"absolute",bottom:"auto",top:"auto"}))}),$("mdl-menu__container").hover(function(){$(this).addClass("is-visible")},function(){$(this).removeClass("is-visible")}),$(".second_nav li.active > ul").show(),$(".catalog .label").on("click",function(){var a=0;if($(this).closest(".catalog").toggleClass("expanded"),$(this).closest(".catalog").hasClass("expanded")){var b=$(".navbar_js").find('[data-lvl="1"] > .link_wrap');a=b.length*b.first().outerHeight()}$(".navbar_js").height(a)}),$(".catalog").on("click",".main_nav li",function(){var a=$(this).data("nav");if("filter"==a){var b=$(this).find("i").text();"filter_list"==b?($(this).find("i").text("highlight_off"),$(this).find("span.title").text("Скрыть"),$(".second_nav, .news ").slideUp(),$(".included_filters").hide(),$(".filters").fadeIn(),$(this).addClass("active")):($(this).find("i").text("filter_list"),$(this).find("span.title").text("Фильтры"),$(".filters").fadeOut(),$(".second_nav, .news").slideDown(),$(".included_filters").show(),$(this).removeClass("active"),$(this).removeClass("hidden"))}else $(".catalog .main_nav li").removeClass("active"),$(this).addClass("active")}),$(".menus").on("click",function(){var a=$(this).closest("li").find("ul");a.hasClass("active")?a.removeClass("active").stop(!0,!0).slideUp():a.addClass("active").stop(!0,!0).slideDown()});var i=getScrollWindow();changeToTop(i),$(window).scroll(function(){i=getScrollWindow(),changeToTop(i)}),$("#toTop").click(function(){$("html, body").animate({scrollTop:0},1e3,"easeInOutCubic")});var j=$(".price"),k=$(".price_nav");if(j.length>0){var l=Math.round(j.offset().left+j.width()/2-k.width()/2);k.offset({left:l})}$(".product_main_img").css("height",$(".product_main_img").outerWidth()),$("#owl-product_mini_img_js").owlCarousel({items:6,itemsCustom:[[320,1],[727,2],[950,3],[1250,4],[1600,5]],navigation:!0,dots:!1,navigationText:['<svg class="arrow_left"><use xlink:href="images/slider_arrows.svg#arrow_left_tidy"></use></svg>','<svg class="arrow_right"><use xlink:href="images/slider_arrows.svg#arrow_right_tidy"></use></svg>']}),$("#owl-popular, #owl-other, #owl-last-viewed, #owl-accompanying, #owl-new-products").owlCarousel({autoPlay:!1,dots:!1,stopOnHover:!0,slideSpeed:300,paginationSpeed:400,itemsScaleUp:!0,responsive:{320:{items:1},727:{items:3},950:{items:5},1250:{items:6},1600:{items:8}},nav:!0,navText:['<svg class="arrow_left"><use xlink:href="images/slider_arrows.svg#arrow_left_tidy"></use></svg>','<svg class="arrow_right"><use xlink:href="images/slider_arrows.svg#arrow_right_tidy"></use></svg>']}),$("#owl-top").owlCarousel({autoPlay:!1,dots:!1,stopOnHover:!0,slideSpeed:300,items:4,paginationSpeed:400,itemsScaleUp:!0,nav:!0,navText:['<svg class="arrow_left"><use xlink:href="images/slider_arrows.svg#arrow_left_tidy"></use></svg>','<svg class="arrow_right"><use xlink:href="images/slider_arrows.svg#arrow_right_tidy"></use></svg>']}),$(".set_rating").on("change",function(){var a=$(this).val();changestars(a)}),$(".star").hover(function(){var a=$(this).closest("label").find("input").val();changestars(a),$(".feedback_stars").on("mouseleave",function(){a=$(this).find("input:checked").val(),a||(a=0),changestars(a)})}),$(".star").on("click",function(a){var b=$(this).closest("label").find("input");b.is(":checked")&&(a.preventDefault(),b.removeAttr("checked"),changestars(0))}),$("input.mdl-checkbox__input").on("click",function(){}),$("body").on("click",".background_panel",function(){closeObject()}),$('[data-type="modal"]').each(function(a,b){$(this).append('<a href="#" class="close_modal btn_js" data-name="'+$(this).attr("id")+'"><i class="material-icons mdl-cell--hide-phone mdl-cell--hide-tablet">close</i><i class="material-icons mdl-cell--hide-desktop">cancel</i></a>')}),$(".product_main_img").on("click",function(){var b=$(this).find("img").attr("src"),c=$(this).find("img").attr("alt");$("#big_photo img").attr({src:b,alt:c}),$("#big_photo").css({"max-width":.9*a}),images=[],$("#owl-product_mini_img_js .owl-item").each(function(){$(this).find("img"),images.push($(this).find("img").attr("class"))});var d=0;$.each(images,function(a,b){"act_img"===b&&(d=a)});var e=$("#big_photos_carousel_js");e.owlCarousel(),e.trigger("to.owl.carousel",[d,500])}),$("#big_photo img").on("click",function(){closeObject()}),$("body").on("click",".btn_js",function(){var a=$(this).data("name");void 0!==a&&openObject(a)}),$(document).keyup(function(a){27==a.keyCode&&closeObject()}),$("body").on("click",".show_demand_chart_js, .chart_edit_js",function(){ModalDemandChart($(this).data("idcategory"))}),$("#demand_chart").on("click",".btn_js.save, .btn_js.update",function(){var a=$(this).closest("#demand_chart"),b=a.data("target"),c=0,d=a.find("#name_user").val(),e=a.find("textarea").val(),f=a.find('.one input[type="range"]'),g=a.find('.two input[type="range"]'),h={roz:{},opt:{}},i=a.find('input[type="hidden"][name="roz_id_chart"]').val(),j=a.find('input[type="hidden"][name="opt_id_chart"]').val();$(".select_go label").is(":checked")&&(c=1),f.each(function(a,b){h.roz[a]=$(b).val()}),g.each(function(a,b){h.opt[a]=$(b).val()}),$(this).hasClass("save")?ajax("product","SaveDemandChart",{values:h,id_category:b,name_user:d,text:e,opt:c}).done(function(a){0==$(".save.btn_js").data("isadmin")?($("#demand_chart_msg .modal_container").html('<div class="msg_wrap"><h3>Благодарим Вас!</h3><p>Данные успешно сохранены.</p><p>После проверки модератором, внесенные Вами изменения будут учтены в итоговом графике спроса данной категории.</p></div>'),componentHandler.upgradeDom(),closeObject("demand_chart"),openObject("demand_chart_msg")):a===!0&&(closeObject("demand_chart"),location.reload())}):ajax("product","UpdateDemandChart",{values:h,id_category:b,name_user:d,text:e,opt:c,id_charts:i+", "+j}).done(function(a){0==$(".update.btn_js").data("isadmin")?($("#demand_chart_msg .modal_container").html('<div class="msg_wrap"><h3>Благодарим Вас!</h3><p>Данные успешно сохранены.</p><p>После проверки модератором, внесенные Вами изменения будут учтены в итоговом графике спроса данной категории.</p></div>'),componentHandler.upgradeDom(),closeObject("demand_chart"),openObject("demand_chart_msg")):a===!0&&(closeObject("demand_chart"),location.reload())})}),$("body").on("click","#demand_chart_msg .close_modal",function(){location.reload()}),$("body").on("click",".avg_chart_det_btn_js",function(){$("#details_btn").hasClass("clicked")?($("#details_btn").removeClass("clicked"),$(".avg_chart_det_btn i").css("transform","rotate(0deg)"),$(".charts_container").css("border-color","transparent"),$(".charts_container .charts_title").addClass("hidden"),$(".charts_wrap").empty()):(addLoadAnimation("#details_btn"),ajax("product","ChartsByCategory",{id_category:$(this).data("idcategory")},"html").done(function(a){$(".avg_chart_det_btn i").css("transform","rotate(90deg)"),$(".charts_container .charts_title").removeClass("hidden"),$(".charts_container").css("border-color","#e0e0e0"),$("#details_btn").addClass("clicked"),removeLoadAnimation("#details_btn"),$(".charts_wrap").html(a),componentHandler.upgradeDom()}))}),$(".note textarea").on("blur",function(){}),$(".add_cart_state input:radio").on("click",function(){var a=!1;$(this.checked)&&(a=!0),$(this).prop("checked",a)}),$("#quiz").on("click",".to_step",function(a){function b(a){if(addLoadAnimation("#quiz"),a.target_step>a.current_step&&a.validate===!0)ajax("quiz","complete_step",a).done(function(b){if(console.log(b),b.success===!0){var c={reload:!1,step:b.target_step?b.target_step:a.target_step};b.target_id_order&&(c.target_id_order=b.target_id_order),b.id_user&&(c.id_user=b.id_user),GetQuizAjax(c)}});else{var b={reload:!1,step:a.target_step};response.target_id_order&&(b.target_id_order=response.target_id_order),response.id_user&&(b.id_user=response.id_user),GetQuizAjax(b)}}a.preventDefault();var c=0,d={validate:!1,current_step:$(this).closest('[class*="step_"]').data("step"),target_step:$(this).data("step"),id_user:$(this).closest('[class*="step_"]').data("id_user"),target_id_order:$(this).closest('[class*="step_"]').data("target_id_order")},e={summary:$("#quiz .summary_info"),current:$(".step_"+$(this).closest('[class*="step_"]').data("step")),target:$(".step_"+$(this).data("step"))};console.log(d),1==d.target_step?2==d.current_step&&b(d):2==d.target_step?1==d.current_step?($(this).hasClass("use_selected")?(d.id_address=e.current.find('[name="address"]').val(),null===d.id_address&&(c++,e.current.find(".mdl-selectfield.address").addClass("is-invalid"))):$(this).hasClass("create_new")?console.log("create clicked"):(d.last_name=e.current.find('[name="last_name"]').val(),d.first_name=e.current.find('[name="first_name"]').val(),d.middle_name=e.current.find('[name="middle_name"]').val(),0===d.last_name.length&&(c++,e.current.find('[name="last_name"]').addClass("is-invalid")),0===d.first_name.length&&(c++,e.current.find('[name="first_name"]').addClass("is-invalid")),0===d.middle_name.length&&(c++,e.current.find('[name="middle_name"]').addClass("is-invalid"))),0===c&&(d.validate=!0,b(d))):3==d.current_step&&b(d):3==d.target_step?2==d.current_step?(d.region=e.current.find("#region").val(),d.city=e.current.find("#city").val(),null!==d.region&&0!==d.region.length||(e.current.find(".region").addClass("is-invalid"),c++),null!==d.city&&0!==d.city.length||(e.current.find(".city").addClass("is-invalid"),c++),0===c&&(d.validate=!0,b(d))):4==d.current_step&&b(d):4==d.target_step?3==d.current_step&&(d.region=e.current.find("#region").val(),d.city=e.current.find("#city").val(),d.id_delivery=parseInt(e.current.find("#id_delivery").val()),d.id_delivery_service=parseInt(e.current.find("#id_delivery_service").val()),d.delivery_department=e.current.find("#delivery_department").val(),d.address=e.current.find("#address").val(),isNaN(d.id_delivery)?(e.current.find(".delivery").addClass("is-invalid"),c++):1==d.id_delivery?null!==d.delivery_department&&0!==d.delivery_department.length||(e.current.find(".delivery_department").addClass("is-invalid"),c++):2==d.id_delivery&&""===d.address&&(e.current.find(".address").addClass("is-invalid"),c++),isNaN(d.id_delivery_service)&&(e.current.find(".delivery_service").addClass("is-invalid"),c++),0===c&&(d.validate=!0,b(d))):5==d.target_step&&4==d.current_step&&(closeObject("quiz"),window.location.hash="",window.location.reload())}),$(".verification_btn").attr("disabled","disabled"),$("#verification").on("click",'[for="choise_current_pass"]',function(){$(".cur_passwd_container, .confirm_btn_js").removeClass("hidden"),$(".verification_meth, .for_verification_code_js, .confirm_code_js, .send_code_js, .ver_info_js").addClass("hidden"),$(".confirm_pass_js").removeClass("hidden"),$(".error_msg_js").text(""),componentHandler.upgradeDom()}),$("#verification").on("click",'[for="choise_verification_code"]',function(){$(".verification_meth, .send_code_js").removeClass("hidden"),$(".cur_passwd_container, .confirm_pass_js").addClass("hidden"),$(".confirm_code_js").addClass("hidden"),$(".error_msg_js").text(""),componentHandler.upgradeDom()}),$('[name="cur_passwd"]').change(function(a){""==$(this).val()?$(this).closest(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").text("Чтобы продолжить введите Ваш текущий пароль"):$(this).val().length<4&&$(this).closest(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").text("Введите корректный пароль")}),$('[name="verification_code"]').change(function(a){""==$(this).val()?$(this).closest(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").text("Чтобы продолжить введите код подтверждения"):4!=$(this).val().length&&$(this).closest(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").text("Введите корректный код подтверждения")}),$(".send_code_js").click(function(a){$(".for_verification_code_js").removeClass("hidden"),$(".send_code_js").addClass("hidden"),$(".confirm_code_js, .ver_info_js").removeClass("hidden");var b=$('[name="id_user"]').val(),c=$(".phone").val().replace(/[^\d]+/g,"");12==c.length&&(phone=c),data={id_user:b,phone:phone,method:"sms"},ajax("cabinet","AccessCode",data).done(function(a){$(".confirm_btn_js").removeAttr("disabled")})}),$(".confirm_pass_js").click(function(a){var b=$('[name="id_user"]').val(),c=$('[name="new_passwd"]').val(),d=$('[name="verification"]:checked').data("value"),e=$('[name="cur_passwd"]').val();data={id_user:b,new_passwd:c,curr_pass:e,method:d},$(".cur_passwd").hasClass("is-invalid")||ajax("cabinet","ChangePassword",data).done(function(a){a.success?$("#verification").html('<div class="auth_ok tac"><i class="material-icons">check_circle</i></div><p class="info_text" style="min-width: 300px; text-align: center;">Пароль успешно изменен!</p><a href="#" class="close_modal btn_js" data-name="verification"><i class="material-icons mdl-cell--hide-phone mdl-cell--hide-tablet">close</i><i class="material-icons mdl-cell--hide-desktop">cancel</i></a>'):$(".error_msg_js").text(a.msg)})}),$(".confirm_code_js").click(function(a){var b=$('[name="id_user"]').val(),c=$('[name="new_passwd"]').val(),d=$('[name="verification"]:checked').data("value"),e=$('[name="verification_code"]').val();data={id_user:b,code:e,new_passwd:c,method:d},$(".for_verification_code_js").hasClass("is-invalid")||ajax("cabinet","ChangePassword",data).done(function(a){a.success?$("#verification").html('<div class="auth_ok tac"><i class="material-icons">check_circle</i></div><p class="info_text" style="min-width: 300px; text-align: center;">Пароль успешно изменен!</p><a href="#" class="close_modal btn_js" data-name="verification"><i class="material-icons mdl-cell--hide-phone mdl-cell--hide-tablet">close</i><i class="material-icons mdl-cell--hide-desktop">cancel</i></a>'):$(".error_msg_js").text(a.msg)}).fail(function(a){alert("Ошибка!")})}),$(".phone").mask("+38 (099) ?999-99-99"),$('input[name="options"]').on("change",function(){$("#quiz .company_details").css("display","block")}),$("#quiz .delivery_service").on("click",'input[name="service"]',function(){$('.delivery_service input[name="service"]:checked')&&$('[data-value="2"]')&&(GetDeliveryMethods($(this).val(),$("#city_select .select_field").text()),Position($(this).closest('[data-type="modal"]')))}),$('.delivery_type [data-value="1"]').on("click",function(){$(".delivery_address").css("display","block"),$(".post_office").css("display","none")}),$('.delivery_type [data-value="2"]').on("click",function(){$('.delivery_service input[name="service"]:checked')&&($(".post_office").css("display","block"),$(".delivery_address").css("display","none"),GetDeliveryMethods($('.delivery_service input[name="service"]:checked').val(),$("#city_select .select_field").text()))}),$("#quiz .mdl-button").on("click",function(a){return a.preventDefault(),!1}),$("#access_recovery").on("click",'label[for="chosen_mail"]',function(){$("#access_recovery #recovery_email").closest("div").addClass("hidden"),$("#access_recovery .input_container").html('<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label>Email</label><input class="mdl-textfield__input input_validator_js" data-input-validate="email" name="value" id="recovery_email"><label class="mdl-textfield__label" for="recovery_email"></label><span class="mdl-textfield__error"></span></div>'),componentHandler.upgradeDom()}),$("#access_recovery").on("click",'label[for="chosen_sms"]',function(){$("#access_recovery #recovery_email").closest("div").addClass("hidden"),$("#access_recovery .input_container").html('<div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label"><label>Номер телефона</label><input class="mdl-textfield__input phone input_validator_js" data-input-validate="phone" name="value" type="text" id="recovery_phone"><label class="mdl-textfield__label" for="recovery_phone"></label><span class="mdl-textfield__error"></span></div>'),$(".phone").mask("+38 (099) ?999-99-99"),componentHandler.upgradeDom()}),$("#access_recovery").on("keyup",".input_container input",function(){$("#access_recovery .input_container input").closest("div").removeClass("is-invalid")}),$("#access_recovery").on("click","#continue",function(a){a.preventDefault();var b,c=$(this).closest('[data-type="modal"]'),d=c.find('[name="recovery_method"]:checked'),e=!1;if("sms"==d.data("value")){var f=$("#access_recovery .phone").val().replace(/[^\d]+/g,"");12==f.length&&(b=f,e=!0)}if("email"==d.data("value")){var g=c.find('[name="value"]').val();if(""!==g){var h=/^([a-z0-9_\.-])+@[a-z0-9-]+\.([a-z]{2,4}\.)?[a-z]{2,4}$/i;h.test(g)?($("#access_recovery .input_container input").closest("div").removeClass("is-invalid"),b=g,e=!0):($("#access_recovery .input_container input").closest("div").addClass("is-invalid"),$(".mdl-textfield__error").text("Введите Email правильно"))}else $("#access_recovery .input_container input").closest("div").addClass("is-invalid"),$(".mdl-textfield__error").text("Введите Email")}data={method:d.data("value"),value:b},e===!1?$("#access_recovery .input_container input").closest("div").addClass("is-invalid"):(addLoadAnimation("#access_recovery"),ajax("auth","accessRecovery",data).done(function(a){removeLoadAnimation("#access_recovery"),a.success?c.find(".password_recovery_container").html(a.content):c.find(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").text(a.msg),componentHandler.upgradeDom()}))}),$("#access_recovery").on("keyup","#passwd",function(a){a.preventDefault();var b=$(this).val(),c=$("#access_recovery #passwdconfirm").val();ValidatePass(b,$(this)),""!==c&&ValidatePassConfirm(b,c)}),$("#access_recovery").on("keyup","#passwdconfirm",function(){var a=$("#access_recovery #passwd").val(),b=$(this).val();ValidatePassConfirm(a,b)}),$("#access_recovery").on("click","#restore",function(a){a.preventDefault();var b=$(this).closest('[data-type="modal"]'),c=b.find('[type="hidden"]').val(),d=b.find('[name="code"]').val();data={id_user:c,code:d},addLoadAnimation("#access_recovery"),ajax("auth","checkСode",data).done(function(a){removeLoadAnimation("#access_recovery"),a.success?b.find(".password_recovery_container").html(a.content):b.find('[name="code"]').closest(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").text(a.msg),componentHandler.upgradeDom()})}),$("#access_recovery").on("click","#confirm_btn",function(a){a.preventDefault(),$("#access_recovery .mdl-textfield__error").empty();var b=$(this).closest('[data-type="modal"]'),c=b.find('[type="hidden"]').val(),d=b.find('input[name="new_passwd"]'),e=b.find('input[name="passwdconfirm"]').val();ValidatePass(d.val(),d),d.val().length>=4&&""!==e&&!ValidatePassConfirm(d.val(),e)&&(data={id_user:c,passwd:e},b.find(".mdl-textfield").hasClass("is-invalid")||(addLoadAnimation("#access_recovery"),ajax("auth","accessConfirm",data).done(function(a){removeLoadAnimation("#access_recovery"),a.success?($(".cabinet_btn").removeClass("hidden"),$(".login_btn").addClass("hidden"),ajax("auth","GetUserProfile",!1,"html").done(function(a){$("#user_profile").append('<img src="/images/noavatar.png"/>'),$(".user_profile_js").html(a),$(".cabinet_btn").removeClass("hidden"),$(".login_btn").addClass("hidden")}),b.find(".password_recovery_container").html(a.content)):value.closest(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").text(a.msg),componentHandler.upgradeDom()})))}),$("#regpasswd").keyup(function(a){a.preventDefault();var b=$(this).val(),c=$("#settings #passwdconfirm").val();ValidatePass(b,$(this)),""!==c&&ValidatePassConfirm(b,c)}),$("#passwdconfirm").keyup(function(){var a=$("#settings #regpasswd").val(),b=$(this).val();ValidatePassConfirm(a,b)}),$('#passwd, #regpasswd, [name="passwdconfirm"]').focusout(function(a){a.preventDefault(),$(this).closest(".mdl-textfield").find(".mdl-textfield__error").empty()}),$(".login_btn").on("click",function(a){openObject("auth"),$("#auth #sign_in").show().removeClass("hidden"),$("#auth #sign_up").hide().addClass("hidden"),a.preventDefault()}),$("#auth").on("click",".switch",function(a){a.preventDefault(),$(this).closest(".modal_container").fadeOut().addClass("hidden"),$("#"+$(this).data("name")).hide().removeClass("hidden").fadeIn(),Position($("#auth"))}),$("#auth").on("click",".sign_in",function(a){a.preventDefault(),addLoadAnimation("#sign_in");var b=$(this).closest("form"),c=b.find("input#email").val(),d=b.find("input#passwd").val();b.find(".error").fadeOut(),a.preventDefault();var e=c.replace(/\D/g,""),g=/^(38)?(\d{10})$/;g.test(e)&&(c=10===e.length?38+e:e),ajax("auth","sign_in",{email:c,passwd:d}).done(function(a){$(".userContainer");if(removeLoadAnimation("#sign_in"),1!=a.err){if(f===!0){var c=$(".products_page"),d=current_id_category,e=parseInt(c.find(".paginator li.active").first().text()),g=(parseInt(c.find(".paginator li.active").last().text()),0),h=30*(e-1);$(".show_more").append('<span class="load_more"></span>'),addLoadAnimation(".products");var i={action:"getmoreproducts_desctop",id_category:d,shown_products:g,skipped_products:h};"search"===current_controller||"product"===current_controller?location.reload():UpdateProductsList(c,i)}closeObject("auth"),3==a.member.gid&&($("#header_js .cart_item").addClass("hidden"),removeFromCart()),$(".login_btn").addClass("hidden"),$(".cabinet_btn").removeClass("hidden").find("img").attr("src",a.member.avatar),ajax("auth","GetUserProfile",!1,"html").done(function(a){$(".user_profile_js").html(a),$("#authorized").removeClass("hidden"),$(".userContainer").removeClass("hidden"),$('button[value="Неавторизован"]').addClass("hidden")}),void 0!==$("#auth").data("from")?location.replace($("#auth").data("from")):"main"===current_controller&&location.reload()}else b.find(".error").text(a.msg).fadeIn()})}),$('#sign_up [name="passwd"]').keyup(function(){var a=$(this).val(),b=$('#sign_up [name="passwdconfirm"]').val();ValidatePass(a,$(this)),""!==b&&ValidatePassConfirm(a,b)}),$('#sign_up [name="passwdconfirm"]').keyup(function(){var a=$('#sign_up [name="passwd"]').val(),b=$(this).val();ValidatePassConfirm(a,b)}),$("#sign_up .sign_up").click(function(a){a.preventDefault(),addLoadAnimation("#sign_up");var b=$(this).closest("form"),c=b.find('[name="name"]').val(),d=b.find('[name="phone"]').val(),e=b.find('[name="id_contragent"]').val(),f=b.find('[name="passwd"]').val(),g=b.find('[name="passwdconfirm"]').val(),h=d.replace(/\D/g,"");d=10===h.length?38+h:h;var i={name:c,phone:d,id_contragent:e,passwd:f,passwdconfirm:g};ajax("auth","register",i).done(function(a){0===a.err?(ajax("auth","GetUserProfile",!1,"html").done(function(a){$("#user_profile").append('<img src="/images/noavatar.png"/>'),
$(".user_profile_js").html(a),$(".cabinet_btn").removeClass("hidden"),$(".login_btn").addClass("hidden")}),openObject("registerComplete")):$.each(a.errm,function(a,b){$('[name="'+a+'"]').closest(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").html(b)}),removeLoadAnimation("#sign_up")}).fail(function(a){console.log("fail"),console.log(a)})}),$(".error_js").click(function(a){a.preventDefault();var b=$(this).closest("form"),c={};b.find(".mdl-textfield__input").each(function(a,b){c[$(b).attr("name")]=$(b).val()}),ajax("errors","error",c)}),$(".estimate_js").on("click",function(a){a.preventDefault();var b=$(this).closest(".modal_container"),c=b.find('input[name="phone"]').val(),d=!b.find(".mdl-textfield").hasClass("is-invalid");d===!0&&(addLoadAnimation("#estimateLoad"),ajax("product","AddEstimate",new FormData($(this).closest("form")[0]),"json",!0).done(function(a){switch(1===a.status?b.find(".estimate_info_js").css("color","green"):b.find(".estimate_info_js").css("color","red"),removeLoadAnimation("#estimateLoad"),a.status){case 1:void 0!==c?($("#issue_result_ok").find(".info_text").html(a.message),ajax("auth","GetUserProfile",!1,"html").done(function(a){$("#user_profile").append('<img src="/images/noavatar.png"/>'),$(".user_profile_js").html(a),$(".cabinet_btn").removeClass("hidden"),$(".login_btn").addClass("hidden"),b.find('input[name="name"], input[name="phone"]').closest("div").remove()})):$("#issue_result_ok").find(".info_text").text("Загрузка прошла успешно!"),b.find('[name="comment"], [type="file"]').val(""),b.find(".estimate_info_js").html(""),b.find(".mdl-textfield").removeClass("is-invalid"),openObject("issue_result_ok");break;case 2:b.find('input[name="phone"]').closest(".mdl-textfield").addClass("is-invalid"),b.find(".estimate_info_js").html(a.message);break;case 3:b.find(".estimate_info_js").text(a.message);break;case 4:b.find(".estimate_info_js").html(""),$("#issue_result_err").find(".info_text").html(a.message),openObject("issue_result_err");break;case 5:b.find('input[type="file"]').closest(".mdl-textfield").addClass("is-invalid"),b.find(".estimate_info_js").text(a.message);break;default:console.log(a)}}))}),0===$("header .cart_item a.cart i").data("badge")&&$("#cart .clear_cart").addClass("hidden"),$("#cart_customer_search .search_form_js").on("submit",function(a){a.preventDefault();var b=$("#cart_customer_search .phone").val(),c=b.replace(/\D/g,""),d=/^(38)?(\d{10})$/;d.test(c)&&(b=10===c.length?38+c:c),12===b.length?(console.log("телефон проверили все ок"),addLoadAnimation("#cart_customer_search"),ajax("cart","getCustomerInfo",{phone:b},"html").done(function(a){removeLoadAnimation("#cart_customer_search"),$("#cart_customer_search .search_results_block").html(a),void 0===$("#cart_customer_search .customer_main_info input").val()?($("#cart_customer_search .new_name_block").removeClass("hidden"),$("#cart_customer_search .add_customer").addClass("hidden"),$("#cart_customer_search .ceate_new_customer").removeClass("hidden"),$("#cart_customer_search .new_name_block input").each(function(){$(this).val("")})):($("#cart_customer_search .new_name_block").addClass("hidden"),$("#cart_customer_search .add_customer").removeClass("hidden"),$("#cart_customer_search .ceate_new_customer").addClass("hidden"))})):$(this).closest(".search_block").find(".phone").addClass("input_phone_error")}),$("#cart_customer_search .add_customer").on("click",function(){var a=$("#cart_customer_search .customer_main_info input").val();addLoadAnimation("#cart_customer_search"),ajax("cart","bindingCustomerOrder",{id_customer:a}).done(function(a){removeLoadAnimation("#cart_customer_search"),closeObject("cart_customer_search"),openObject("cart")})}),$("#cart_customer_search .ceate_new_customer").on("click",function(){var a=$("#new_user_surname").val(),b=$("#new_user_name").val(),c=$("#new_user_middle_name").val(),d=$("#cart_customer_search .phone").val(),e=!0,f=d.replace(/\D/g,""),g=/^(38)?(\d{10})$/;g.test(f)&&(d=10===f.length?38+f:f),$("#cart_customer_search .new_name_block input").each(function(){""===$(this).val()&&($(this).closest("div").addClass("is-invalid"),e=!1)}),e===!0&&(addLoadAnimation("#cart_customer_search"),ajax("cart","createCustomer",{phone:d,first_name:b,last_name:a,middle_name:c}).done(function(a){removeLoadAnimation("#cart_customer_search"),closeObject("cart_customer_search"),openObject("cart")}))}),$("#cart_customer_search .phone").keyup(function(){console.log("нажали"),$(this).removeClass("input_phone_error")}),$(".order").on("click",".number",function(){var a=$(this).closest(".order");a.hasClass("expanded")?$(".order").removeClass("expanded").find(".tabs").slideUp():($(".order").removeClass("expanded").find(".tabs").slideUp(),a.addClass("expanded").find(".tabs").slideDown())}),$(".showall").on("click",function(){$(".order").addClass("expanded").find(".tabs").slideDown()}),$(".hideall").on("click",function(){$(".order").removeClass("expanded").find(".tabs").slideUp()}),$("#percent tr:first").css("color","#000"),$(".toBigPhoto").click(function(a){$("#big_photo img").attr("src",$(this).data("original-photo"))}),moveObjects(),$('input[name="product_limit_checkbox"]').on("change",function(){var a=$(this).data("id-product"),b=$("#product_limit_mopt_"+a);this.checked?limit=1e7:limit=0,b.val(limit),toAssort($(this).data("id-product"),0,$(this).data("koef"),$(this).data("supp"))}),$("body").on("mouseenter","button",function(){var a=parseInt($(this).closest(".quantity").find(".qty_js").val()),b=$(this).closest(".quantity").find(".minQty").val(),c=parseInt($.cookie("sum_range")),d=parseInt($(this).closest(".buy_block").find(".priceOpt3").val()),e=parseInt($(".currentCartSum").html()),f=parseInt($(this).closest(".buy_block").find(".itemProdQty").html());if($(this).hasClass("btn_remove")===!0)if(a==b){var g=$(this).closest(".buy_block").find(".priceMopt"+c).val();$(".tooltipForBtnRemove_js").removeClass("hidden").html("до "+a+" шт. цена "+g+" грн.")}else 0===c&&e-d<=columnLimits[0]&&$(".tooltipForBtnRemove_js").removeClass("hidden").html("до "+a+" шт. изменит % скидки"),1===c&&e-d<=columnLimits[1]&&$(".tooltipForBtnRemove_js").removeClass("hidden").html("до "+a+" шт. изменит % скидки");else if(a+f==b){var h=$(this).closest(".buy_block").find(".priceOpt"+c).val();$(".tooltipForBtnAdd_js").removeClass("hidden").html("больше "+b+" шт. цена "+h+" грн.")}else 1===c&&e+d>=columnLimits[0]&&$(".tooltipForBtnAdd_js").removeClass("hidden").html("больше "+a+" шт. изменит % скидки"),2===c&&e+d>=columnLimits[1]&&$(".tooltipForBtnAdd_js").removeClass("hidden").html("больше "+a+" шт. изменит % скидки"),3===c&&e+d>=columnLimits[2]&&$(".tooltipForBtnAdd_js").removeClass("hidden").html("больше "+a+" шт. изменит % скидки")}).on("mouseleave","button",function(){$(".tooltipForBtnAdd_js").addClass("hidden"),$(".tooltipForBtnRemove_js").addClass("hidden")}),$(".to_org_catalog_btn_js").on("click",function(){$.cookie("Segmentation",1,{path:"/"})}),$(".to_magaz_catalog_btn_js").on("click",function(){$.cookie("Segmentation",2,{path:"/"})});var m=!1;$("body").on("click",".err_msg_as_knob_js, .screen_btn_js, .canvasReady_js",function(a){$(this).hasClass("err_msg_as_knob_js")?($(".err_msg_as_js").hasClass("shown")?$(".err_msg_as_js").removeClass("shown").css("top","100%"):$(".err_msg_as_js").addClass("shown").css("top","calc(100% - "+$(".err_msg_as_js").outerHeight()+"px)"),m||(m=!0,a.preventDefault(),$("#err_canvas").attr({width:$(window).outerWidth(),height:$("header").outerHeight()+$("section.main").outerHeight()+$(".phone_err_msg_js").outerHeight()+$("footer").outerHeight()}),$(".screen_btn_js").removeClass("screen_btn_js").addClass("clicked_js").addClass("is-checked"),$(".err_msg_as_js").removeClass("shown").css("top","100%"),$(document).outerWidth()<450&&$(".err_msg_as_form_js .mdl-textfield").css("height","calc(100vh - 345px)"),GetScreenshot())):$(this).hasClass("screen_btn_js")?(a.preventDefault(),m=!0,$("#err_canvas").attr({width:$(window).outerWidth(),height:$("header").outerHeight()+$("section.main").outerHeight()+$(".phone_err_msg_js").outerHeight()+$("footer").outerHeight()}),$(this).removeClass("screen_btn_js").addClass("clicked_js").addClass("is-checked"),$(".err_msg_as_js").removeClass("shown").css("top","100%"),GetScreenshot()):$(this).hasClass("canvasReady_js")&&($(".canvas_toolbar").css("display","none"),GetScreenshot()),$(".err_msg_as_form_js").find("textarea").focus()}),$("body").on("click",".clicked_js",function(a){a.preventDefault(),m=!0,closeObject("big_photo"),$(this).addClass("screen_btn_js").removeClass("is-checked").removeClass("clicked_js"),$("#savedCopyContainer").css("display","none"),$(document).outerWidth()<450&&$(".err_msg_as_form_js .mdl-textfield").css("height","calc(100vh - 145px)"),$(".err_msg_as_js").addClass("shown").css("top","calc(100% - "+$(".err_msg_as_js").outerHeight()+"px)"),$("#savedImageCopy").attr("src",""),$(".err_msg_as_form_js").find("textarea").focus(),$("#err_canvas").attr({width:"20",height:"20"})}),$(".go_to_canvas_toolbar_js").click(function(a){closeObject("big_photo"),$(".err_msg_as_js").removeClass("shown").css("top","100%"),$(".canvas_toolbar").css("display","block"),$("#err_canvas").attr({width:$(window).outerWidth(),height:$("header").outerHeight()+$("section.main").outerHeight()+$(".phone_err_msg_js").outerHeight()+$("footer").outerHeight()})}),$("body").on("click",".img_zoom_js",function(a){$(".err_msg_as_js").removeClass("shown").css("top","100%"),$("#err_canvas").attr({width:"20",height:"20"});var b=$("#savedImageCopy").attr("src");$("#big_photo").css({overflow:"auto","overflow-x":"hidden",padding:"2em"}),$("#big_photo img").attr("src",b).css("width","100%"),openObject("big_photo")}),$(".err_msg_as_send_js").click(function(a){var b=$('textarea[name="errcomment"]').val(),c=$("#savedImageCopy").attr("src"),d={err_msg:b,img_src:c};ajax("errors","error",d).done(function(a){3!=a.status?($('textarea[name="errcomment"] + label').css("color","rgba(0, 0, 0, .26)"),$('textarea[name="errcomment"]').val("").closest("div").removeClass("is-dirty"),$("#savedCopyContainer").css("display","none"),$(".err_msg_as_js").addClass("shown").css("top","calc(100% - "+$(".err_msg_as_js").outerHeight()+"px)"),$("#savedImageCopy").attr("src",""),$(".err_msg_as_js").removeClass("shown").css("top","100%"),$(".clicked_js").addClass("screen_btn_js").removeClass("clicked_js").removeClass("is-checked"),componentHandler.upgradeDom()):$('textarea[name="errcomment"] + label').css("color","#ff0000");var b={message:a.message},c=document.querySelector("#snackbar");c.MaterialSnackbar.showSnackbar(b)})}),$("body").on("click",".problem_area_js",function(){var a="yellow",b="rect";init(a,b)}),$("body").on("click",".confidential_js",function(){var a="black",b="fillrect";init(a,b)}),$("body").on("click",".pencil_for_canvas_js",function(){var a="red",b="pencil";init(a,b)}),$("body").on("click",".eraser_for_canvas_js",function(){var a="#fff",b="eraser";init(a,b)}),$("body").on("click",".canvasClear_js",function(a){clear_canvas()}),$("body").on("click",".close_canvas_toolbar_js",function(a){$(".canvas_toolbar").css("display","none"),$("#err_canvas").attr({width:"20",height:"20"}),clear_canvas()}),$(document).scroll(function(a){$(document).scrollTop()>=$(window).outerHeight()?$(".go_up_js").css("bottom","4em"):$(".go_up_js").css("bottom","-3em")}),$(".go_up_js").click(function(a){$("html, body").animate({scrollTop:0},1e3,"easeInOutCubic")}),$("body").on("click",".mob_search_btn_js",function(a){a.preventDefault(),$("html").addClass("active_bg").find("header").addClass("opened").find("div.search").addClass("is-focused"),componentHandler.upgradeDom()}),$("body").on("click",".header_search_close_js",function(a){a.preventDefault(),$("html").removeClass("active_bg").find("header").removeClass("opened").find("div.search").removeClass("is-focused"),componentHandler.upgradeDom()}),$("body").on("click",".offers_js, .issue_js",function(){var a=$(this),b=$(this).closest(".modal_container").find("form");if(""==b.find("textarea").val()?b.find("textarea").closest(".mdl-textfield").addClass("is-invalid"):b.find("textarea").closest(".mdl-textfield").removeClass("is-invalid"),""==b.find('input[name="user_email"]').val()&&b.find('input[name="user_email"]').closest(".mdl-textfield").addClass("is-invalid"),b.find(".mdl-textfield").hasClass("is-invalid"))""!=b.find('input[name="user_email"]').val()?b.find('input[name="user_email"]').closest(".mdl-textfield").find(".mdl-textfield__error").text("Введите Email правильно"):b.find('input[name="user_email"]').closest(".mdl-textfield").find(".mdl-textfield__error").text("Поле обязательно для заполнения!");else{var c={issue:$(this).hasClass("offers_js")?0:1,id_user:b.find('input[type="hidden"]').val(),email:b.find('input[name="user_email"]').val(),comment:b.find("textarea").val()};ajax("global","SaveGuestComment",c).done(function(c){switch(c.err){case 1:b.find('input[name="user_email"]').closest(".mdl-textfield").addClass("is-invalid").find(".mdl-textfield__error").text(c.msg);break;case 2:b.find("textarea").closest(".mdl-textfield").addClass("is-invalid");break;case 3:a.hasClass("offers_js")?closeObject("offers"):closeObject("issue"),$(".issue_result_js .modal_container").html('<div class="issue_ok"><i class="material-icons">check_circle</i></div><p class="info_text">Ваше сообщение было отправлено</p>'),openObject("issue_result");break;case 4:a.hasClass("offers_js")?closeObject("offers"):closeObject("issue"),$(".issue_result_js .modal_container").html('<div class="issue_err"><i class="material-icons">error</i></div><p class="info_text">Что-то пошло не так. Повторите попытку.</p>'),openObject("issue_result");break;default:console.log(c)}}).fail(function(a){console.log("error")})}}),$("body").on("click",".feedback_comment_reply_js",function(a){a.preventDefault(),"false"==$(this).attr("data-isauthorized")?openObject("auth"):($(this).addClass("hidden").closest(".feedback_item_js").find(".comment_reply_cancel_js").removeClass("hidden"),$(this).closest(".feedback_item_js").append('<div class="reply_wrap"><form action="'+$(this).attr("data-action")+'" method="post" onsubmit="onCommentSubmit()"><input type="hidden" name="pid_comment" value="'+$(this).attr("data-idComment")+'"><textarea name="feedback_text" id="feedback_comment_reply" cols="30" required></textarea><div class="user_data hidden"><div class="fild_wrapp"><label for="feedback_author">Ваше имя:</label><input type="text" name="feedback_author" id="feedback_author" required value="Петя"></div><div class="fild_wrapp"><label for="feedback_authors_email">Эл.почта:</label><input type="email" name="feedback_authors_email" id="feedback_authors_email" required value="petya@gmail.com"></div></div><button type="submit" name="sub_com" class="mdl-button mdl-js-button">Ответить</button></form></div>'))}),$("body").on("click",".comment_reply_cancel_js",function(a){a.preventDefault(),$(this).closest(".feedback_item_js").find(".reply_wrap").remove(),$(this).addClass("hidden").closest(".feedback_item_js").find(".feedback_comment_reply_js").removeClass("hidden")}),$("body").on("change",'input[class^="move_product_"]',function(a){var b={};b.id_product=$(this).attr("data-idproduct"),this.checked?b.checked=1:b.checked=0,ajax("products","sessionFillCategory",b,"text").done(function(a){console.log(a)}).fail(function(a){console.log("fail"),console.log(a)})}),$("body").on("click",".seasonality_js",function(a){$(this).hasClass("with_demand_graph")||(addLoadAnimation("#seasonality"),$(this).addClass("with_demand_graph"),$(document).outerWidth()>500?$("#seasonality").append('<iframe seamless id="demand_graph" class="demand_graph" src="https://www.google.com/trends/fetchComponent?hl=ru-RU&q='+$("input[name=par_lvl]").val()+"&geo=UA&date=today+24-m&cid=TIMESERIES_GRAPH_0&export=5&w="+($(".tab-content").outerWidth()-(2*parseInt($(".tab-content").css("padding-right"))+8))+'&h=470"></iframe>'):$("#seasonality").append('<iframe seamless id="demand_graph" class="demand_graph" src="https://www.google.com/trends/fetchComponent?hl=ru-RU&q='+$("input[name=par_lvl]").val()+"&geo=UA&date=today+24-m&cid=TIMESERIES_GRAPH_0&export=5&w="+($(".tab-content").outerWidth()-(2*parseInt($(".tab-content").css("padding-right"))+10))+'&h=400"></iframe>'),setTimeout(function(){removeLoadAnimation("#seasonality")},2e3))}),$("body").on("click",".add_del_waiting_list_js",function(a){a.preventDefault();var b=$(this).closest(".wlist_msg_wrap_js");AddInWaitingList(b.data("id-product"),b.data("id-user"),b.data("email"),$(this)),b.find(".add_wrap_js").addClass("hidden"),b.find(".del_wrap_js").removeClass("hidden")}),$("#submit").closest("div").on("click",function(){if(1==$(this).find("#submit").prop("disabled")){var a={message:"Заполните все обязательные поля!"},b=document.querySelector("#snackbar");b.MaterialSnackbar.showSnackbar(a)}}),$(".product_label_js").on("click",function(){addLoadAnimation("#gift_products"),ajax("product","GetGiftsList",{},"html").done(function(a){removeLoadAnimation("#gift_products"),$("#gift_products .modal_container").html(a),Position($("#gift_products"))})}),$(".gift_modal").on("click",".gift_product_js",function(){$(this).hasClass("active")?($(".gift_modal .gift_product_js").removeClass("disabled").removeClass("active"),$(".id_gift_input_js").val(null)):($(".gift_modal .gift_product_js").removeClass("active").addClass("disabled"),$(this).removeClass("disabled").addClass("active"),$(".id_gift_input_js").val($(this).find(".id_gift_product_js").val()))}),$(".cart_gift_select_js").on("click",function(){addLoadAnimation(".gift_modal");var a=$(this).closest(".gift_modal").find(".id_gift_input_js").val();ajax("cart","chosenGift",{id_product:a}).done(function(){removeLoadAnimation(".gift_modal"),closeObject("gift_select"),openObject("cart")})}),$(".gift_btn_js").on("click",function(){var a=$(this),b=a.closest(".gift").find(".id_gift_js").val(),c=$(".id_agent_js").val(),d=a.closest(".gift").hasClass("selected")?0:1;addLoadAnimation(a.closest(".gift")),ajax("product","agentGiftToggle",{id_product:b,id_agent:c,add:d}).done(function(b){if(removeLoadAnimation(a.closest(".gift")),b.success===!0)a.closest(".gift").toggleClass("selected");else{var c={message:"Действие прервано. Попробуйте повторить позже."},d=document.querySelector("#snackbar");d.MaterialSnackbar.showSnackbar(c)}})}),$("#preview, #caruselCont").on("click","#owl-product_mini_img_js .owl-item",function(a){$(".product_main_img").find("#mainVideoBlock").addClass("hidden"),$(".product_main_img").find("iframe").attr("src","");var b=$(this).find("img").attr("src"),c=$(window).width();if(c>711){$("#owl-product_mini_img_js").find("img").removeClass("act_img"),$("#owl-product_mini_img_js").find("iframe").removeClass("act_img"),$(this).find("img").addClass("act_img");var d=$(".path_root_js").val(),e=$(".path_product_img_js").val();b=b.indexOf(e.replace(d,""))>-1?b.replace("/thumb/","/original/"):b.replace("_thumb/",""),$(".product_main_img").hide().fadeIn("100").find(".main_img_js").attr("src",b)}else a.preventDefault()}).on("click",".videoBlock",function(a){a.stopPropagation(),$("#owl-product_mini_img_js").find("iframe").removeClass("act_img"),$("#owl-product_mini_img_js").find("img").removeClass("act_img"),$(this).find("iframe").addClass("act_img");var b=$(this).find("iframe").attr("src");$(".product_main_img").find("iframe").attr("src",b),$(".product_main_img").find("#mainVideoBlock").removeClass("hidden")}),$("#demand_graph").load(function(){$(this).contents().find("body").css("overflow","hidden"),$(this).contents().find("head").append('<link type="text/css" rel="Stylesheet" href="https://xt.ua/themes/default/css/page_styles/product.css" />')}),$("body").on("click",".card .favorite i",function(a){a.preventDefault();var b=$(this).closest(".favorite");b.hasClass("added")?(b.removeClass("added"),RemoveFavorite(b.data("id-product"),$(this))):(b.addClass("added"),AddFavorite(b.data("id-product"),$(this)))}),$("body").on("click",".card .waiting_list",function(a){a.preventDefault(a);var b=$(this).closest(".fortrending");$(this).hasClass("arrow")?($(this).removeClass("arrow"),RemoveFromWaitingList(b.data("id-product"),b.data("id-user"),b.data("email"),$(this))):($(this).addClass("arrow"),AddInWaitingList(b.data("id-product"),b.data("id-user"),b.data("email"),$(this)))}),$("body").on("click",".apps_panel .favorite",function(a){a.preventDefault();var b=$(this);b.hasClass("added")?(b.removeClass("added"),RemoveFavorite(b.data("id-product"),$(this),!0)):(b.addClass("added"),AddFavorite(b.data("id-product"),$(this),!0))}),$("body").on("click",".apps_panel .fortrending",function(a){a.preventDefault(a),$(this).find(".waiting_list").hasClass("arrow")?($(this).find(".waiting_list").removeClass("arrow"),RemoveFromWaitingList($(this).data("id-product"),$(this).data("id-user"),$(this).data("email"),$(this))):($(this).find(".waiting_list").addClass("arrow"),AddInWaitingList($(this).data("id-product"),$(this).data("id-user"),$(this).data("email"),$(this)))}),$(".price_help_js").on("click",function(){var a=$(this).closest(".card").data("idproduct"),b=$("#price_details");b.find(".modal_container").html(""),addLoadAnimation(b),ajax("product","priceHelp",{id_product:a},"html").done(function(a){removeLoadAnimation(b),$("#price_details .modal_container").html(a),Position(b)})}),$(".product_main_img").on("click",function(a){$("#big_photo img").css("height",$('#big_photo[data-type="modal"]').outerHeight()+"px")}),$("body").on("click",".show_preview_js",function(){var a=$("#preview"),b=$(this).closest(".card").data("idproduct");Position(a),a.find(".modal_container").html(""),addLoadAnimation(a),ajax("product","GetPreview",{id_product:b},"html").done(function(b){a.find(".modal_container").html(b),componentHandler.upgradeDom(),removeLoadAnimation(a)})}),$("body").on("mouseenter",".search_category .mdl-selectfield__box, .search_category .mdl-selectfield__list-option-box li",function(a){a.preventDefault(),$(".search_category.mdl-selectfield").addClass("is-focused")}),$("body").on("mouseleave",".search_category .mdl-selectfield__box, .search_category .mdl-selectfield__list-option-box li",function(a){a.preventDefault(),$(".search_category.mdl-selectfield").removeClass("is-focused")}),$("body").on("click",".search_category .mdl-selectfield__list-option-box li",function(a){a.preventDefault(),$(".search_category.mdl-selectfield").removeClass("is-focused")}),$("body").on("focusout",".input_validator_js",function(a){userInfoValidator($(this))}),addLoadAnimation(".navbar_js")}),$(document).ready(function(){$("#subCategory_grid").masonry(),ajax("navigation","generateNavigation",!1,"html").done(function(a){if($(".navbar_js").html(a),$(".catalog").hasClass("expanded")){var b=$(".navbar_js").find('[data-lvl="1"] > .link_wrap');$(".navbar_js").height(b.length*b.first().outerHeight())}})});